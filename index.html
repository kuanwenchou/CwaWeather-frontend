<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‹±é›„è§€æ¸¬ç«™</title>
    <link rel="icon" type="image/png" href="./icon-v2.png">
    <link rel="apple-touch-icon" href="./icon-v2.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icon-v2.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Noto+Sans+TC:wght@700;900&display=swap"
        rel="stylesheet">

    <style>
        :root {
            /* === æ¼«å¨ç¾å¼æ¼«ç•«é¢¨æ ¼é…è‰² === */
            --color-comic-red: #ED1D24;
            /* æ¼«ç•«ç´…ï¼šåŠ›é‡ */
            --color-comic-blue: #0B479B;
            /* æ¼«ç•«è—ï¼šå¤©ç©ºã€å†·éœ */
            --color-comic-yellow: #FDBB2F;
            /* æ¼«ç•«é»ƒï¼šèƒ½é‡ã€é–ƒå…‰ */
            --color-comic-black: #000000;
            /* ç²—ç·šæ¢ã€æ–‡å­— */
            --color-comic-white: #FFFFFF;
            /* é«˜å…‰ã€æ¬¡è¦æ–‡å­— */
            --color-comic-paper: #FFFDE7;
            /* æ¼«ç•«ç´™å¼µã€å¡ç‰‡èƒŒæ™¯ */
            --color-comic-sky: #ADD8E6;
            /* æ·ºè—è‰²èƒŒæ™¯ */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            /* ä¸»å­—é«”ä½¿ç”¨ Noto Sans TC çš„ç²—é«”ï¼Œæ¨™é¡Œå¯é¸ Bebas Neue */
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--color-comic-sky);
            color: var(--color-comic-black);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 30px;

            /* æ¼«ç•«é¢¨æ ¼èƒŒæ™¯ï¼šåŠè‰²èª¿ç¶²é» */
            background-image:
                radial-gradient(circle at 100% 150%, var(--color-comic-red) 24%, var(--color-comic-blue) 25%, var(--color-comic-blue) 28%, var(--color-comic-yellow) 29%, var(--color-comic-yellow) 36%, var(--color-comic-sky) 36%, var(--color-comic-sky) 40%),
                radial-gradient(circle at 0% 150%, var(--color-comic-red) 20%, var(--color-comic-blue) 21%, var(--color-comic-blue) 24%, var(--color-comic-yellow) 25%, var(--color-comic-yellow) 32%, var(--color-comic-sky) 33%, var(--color-comic-sky) 34%),
                radial-gradient(circle at 50% 100%, var(--color-comic-red) 10%, var(--color-comic-blue) 11%, var(--color-comic-blue) 13%, var(--color-comic-yellow) 14%, var(--color-comic-yellow) 20%, var(--color-comic-sky) 21%, var(--color-comic-sky) 22%),
                radial-gradient(circle at 100% 50%, var(--color-comic-red) 5%, var(--color-comic-blue) 6%, var(--color-comic-blue) 8%, var(--color-comic-yellow) 9%, var(--color-comic-yellow) 12%, var(--color-comic-sky) 13%, var(--color-comic-sky) 14%),
                radial-gradient(circle at 0% 50%, var(--color-comic-red) 12%, var(--color-comic-blue) 13%, var(--color-comic-blue) 16%, var(--color-comic-yellow) 17%, var(--color-comic-yellow) 20%, var(--color-comic-sky) 21%, var(--color-comic-sky) 22%);
            background-size: 80px 80px;
            /* æ¨¡æ“¬é»é™£ç¶²é»å¤§å° */
        }

        /* é ‚éƒ¨ç‹€æ…‹åˆ— */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: var(--color-comic-red);
            /* æ¼«ç•«ç´…é ‚éƒ¨ */
            border-bottom: 5px solid var(--color-comic-black);
            /* ç²—é»‘é‚Šæ¡† */
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.4);
        }

        .location-pill {
            /* çˆ†ç‚¸ç‹€é‚Šæ¡†æˆ–ä¸è¦å‰‡å½¢ç‹€ */
            background: var(--color-comic-yellow);
            /* é»ƒè‰²èƒŒæ™¯ */
            color: var(--color-comic-black);
            padding: 8px 20px;
            border-radius: 8px;
            /* ç¨å¾®å¸¶é»åœ“è§’ä½†ä¿æŒç¡¬æœ— */
            font-weight: 900;
            font-size: 1.2rem;
            border: 3px solid var(--color-comic-black);
            /* ç²—é»‘é‚Šæ¡† */
            box-shadow: 5px 5px 0 var(--color-comic-black);
            /* æ¼«ç•«æ„Ÿé™°å½± */
            transform: skewX(-5deg);
            /* ç¨å¾®å‚¾æ–œï¼Œå¢åŠ å‹•æ…‹æ„Ÿ */
            font-family: 'Bebas Neue', sans-serif;
            /* æ¼«ç•«å­—é«” */
        }

        .update-pill {
            font-size: 0.9rem;
            color: var(--color-comic-white);
            background: var(--color-comic-blue);
            /* è—è‰²èƒŒæ™¯ */
            padding: 6px 15px;
            border-radius: 6px;
            font-weight: 700;
            border: 2px solid var(--color-comic-black);
            font-family: 'Bebas Neue', sans-serif;
        }

        .container {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* === æ ¸å¿ƒï¼šä»Šæ—¥ç„¦é»å¡ç‰‡ (Hero Card) === */
        .hero-card {
            background: var(--color-comic-paper);
            /* æ¼«ç•«ç´™å¼µè‰² */
            border-radius: 12px;
            /* ç•¥å¸¶åœ“è§’ */
            padding: 30px 25px;
            text-align: center;
            border: 5px solid var(--color-comic-black);
            /* ç²—é»‘é‚Šæ¡† */
            box-shadow: 8px 8px 0 var(--color-comic-black),
                15px 15px 0 rgba(0, 0, 0, 0.2);
            /* é›™å±¤é™°å½±ï¼Œæ›´ç«‹é«” */
            /* å¢åŠ å¡ç‰‡åº•éƒ¨çš„ç©ºé–“ï¼Œç¢ºä¿æ¨™ç±¤ä¸æœƒè¢«é®æ“‹ */
            margin-bottom: 40px;
            position: relative;
            transform: rotate(-1deg);
            /* è¼•å¾®å‚¾æ–œï¼Œå¢åŠ æ¼«ç•«æ„Ÿ */
            transition: transform 0.3s ease;
        }

        .hero-card:hover {
            transform: rotate(1deg) scale(1.01);
            /* äº’å‹•æ•ˆæœ */
        }

        /* åƒæ¼«ç•«åˆ†é¡æˆ–çˆ†ç‚¸å°è©±æ¡†çš„æ¨™ç±¤ */
        .hero-period {
            position: absolute;
            /* ä¿®æ­£ 1ï¼šå°‡ top è¨­ç‚º 0ï¼Œä¸¦èª¿æ•´ translate ä½¿å…¶å‰›å¥½ä½æ–¼ Header ä¹‹ä¸‹ */
            top: 0px;
            left: 50%;
            /* èª¿æ•´ -50% ç‚º -100px (ç´„ç‹€æ…‹æ¬„é«˜åº¦ + é‚Šç•Œ) ç¢ºä¿å®ƒä¸æœƒè¢« Header æ“‹åˆ° */
            transform: translate(-50%, -100px) rotate(3deg); 
            background: var(--color-comic-red);
            /* ç´…è‰²æ¨™ç±¤ */
            color: var(--color-comic-white);
            padding: 8px 25px;
            border-radius: 8px;
            font-weight: 900;
            border: 3px solid var(--color-comic-black);
            box-shadow: 4px 4px 0 var(--color-comic-black);
            font-size: 1.3rem;
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 1px;
            z-index: 90;
            /* ç¢ºä¿å®ƒåœ¨å¡ç‰‡ä¹‹ä¸Š */
        }

        .hero-temp-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 25px 0;
        }

        .hero-icon {
            font-size: 7rem;
            /* æ”¾å¤§åœ–æ¨™ */
            filter: drop-shadow(5px 5px 0 var(--color-comic-black));
            /* ç²—é»‘é™°å½± */
            animation: pulse-comic 2s infinite ease-in-out;
            /* æ–°çš„æ¼«ç•«æ„Ÿè„ˆå‹•å‹•ç•« */
        }

        @keyframes pulse-comic {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
                filter: drop-shadow(8px 8px 0 var(--color-comic-black));
            }
        }

        .hero-temp {
            font-size: 6rem;
            font-weight: 900;
            color: var(--color-comic-black);
            /* é»‘è‰²æº«åº¦ */
            line-height: 1;
            /* å¼·çƒˆçš„ç´…é»ƒæ¼¸è®Šé™°å½±ï¼Œæ¨¡æ“¬èƒ½é‡ */
            text-shadow: 5px 5px 0 var(--color-comic-red),
                8px 8px 0 var(--color-comic-yellow);
            font-family: 'Bebas Neue', sans-serif;
        }

        .hero-desc {
            font-size: 1.8rem;
            color: var(--color-comic-blue);
            /* è—è‰²æè¿° */
            margin-bottom: 25px;
            font-weight: 900;
            border-bottom: 3px dashed var(--color-comic-black);
            /* æ¼«ç•«åˆ†éš”ç·š */
            padding-bottom: 10px;
            font-family: 'Noto Sans TC', sans-serif;
        }

        /* === å¿«é€Ÿå»ºè­°å€ (Advice Grid) === */
        .advice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
            padding-top: 25px;
            border-top: 4px solid var(--color-comic-black);
            /* ç²—åˆ†éš”ç·š */
        }

        .advice-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: var(--color-comic-blue);
            /* è—è‰²èƒŒæ™¯ */
            padding: 18px;
            border-radius: 10px;
            border: 3px solid var(--color-comic-black);
            box-shadow: 4px 4px 0 var(--color-comic-black);
            color: var(--color-comic-white);
            /* ç™½å­— */
            transition: transform 0.2s ease;
        }

        .advice-item:hover {
            transform: translateY(-5px) scale(1.02);
            background: var(--color-comic-red);
            /* hover æ™‚è®Šè‰² */
        }

        .advice-icon {
            font-size: 3rem;
            margin-bottom: 8px;
            filter: drop-shadow(3px 3px 0 var(--color-comic-black));
        }

        .advice-text {
            font-size: 1.6rem;
            font-weight: 900;
            color: var(--color-comic-yellow);
            /* é»ƒè‰²æ–‡å­—ï¼Œé†’ç›® */
            margin: 8px 0;
            line-height: 1.2;
            font-family: 'Bebas Neue', sans-serif;
            text-shadow: 2px 2px 0 var(--color-comic-black);
        }

        /* è¼”åŠ©æ–‡å­— */
        .advice-item div[style*="font-size:0.7rem"] {
            color: var(--color-comic-white) !important;
            /* ç™½å­—ï¼Œæ¬¡è¦è³‡è¨Š */
            font-weight: 700;
            font-family: 'Noto Sans TC', sans-serif;
        }


        /* === ç¨å¾Œé å ±ï¼šæ©«å‘æ»‘å‹•å€ === */
        .section-title {
            font-size: 1.8rem;
            color: var(--color-comic-black);
            margin-bottom: 20px;
            margin-left: 0;
            font-weight: 900;
            text-shadow: 3px 3px 0 var(--color-comic-red);
            /* ç´…è‰²é™°å½± */
            border-bottom: 6px solid var(--color-comic-black);
            /* ç²—é»‘åº•ç·š */
            padding-bottom: 8px;
            display: inline-block;
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 1px;
            transform: skewX(-3deg);
            /* å‚¾æ–œæ¨™é¡Œ */
        }

        .scroll-container {
            display: flex;
            overflow-x: auto;
            gap: 20px;
            padding-bottom: 15px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .scroll-container::-webkit-scrollbar {
            display: none;
        }

        .mini-card {
            min-width: 160px;
            /* ç•¥å¯¬ */
            background: var(--color-comic-paper);
            border-radius: 10px;
            padding: 22px 18px;
            text-align: center;
            border: 3px solid var(--color-comic-black);
            box-shadow: 3px 3px 0 var(--color-comic-black);
            flex-shrink: 0;
            color: var(--color-comic-black);
            transition: transform 0.2s ease;
        }

        .mini-card:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 5px 5px 0 var(--color-comic-black);
        }

        .mini-time {
            background: var(--color-comic-red);
            color: white;
            padding: 5px 15px;
            border-radius: 6px;
            font-size: 1rem;
            display: inline-block;
            margin-bottom: 12px;
            font-weight: 700;
            border: 2px solid var(--color-comic-black);
            font-family: 'Bebas Neue', sans-serif;
        }

        .mini-icon {
            font-size: 3.5rem;
            margin: 8px 0;
            filter: drop-shadow(2px 2px 0 rgba(0, 0, 0, 0.5));
        }

        .mini-temp {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--color-comic-blue);
            /* è—è‰²æº«åº¦ */
            font-family: 'Bebas Neue', sans-serif;
            text-shadow: 1px 1px 0 var(--color-comic-black);
        }

        .mini-card div[style*="font-size:0.8rem"] {
            color: var(--color-comic-black) !important;
            font-weight: 700;
            margin-top: 8px;
            font-family: 'Noto Sans TC', sans-serif;
        }


        /* Loading ç•«é¢ */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-comic-blue);
            /* è—è‰²è®€å–ç•«é¢ */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .loading-screen p {
            color: var(--color-comic-white);
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            text-shadow: 2px 2px 0 var(--color-comic-black);
            animation: text-flash 1s infinite alternate;
            /* æ–‡æœ¬é–ƒçˆ */
        }

        @keyframes text-flash {
            0% {
                opacity: 1;
            }

            100% {
                opacity: 0.7;
            }
        }

        /* æ›¿æ› Loading Icon å’Œå‹•ç•« */
        .loading-screen div[style*="font-size: 4rem"] {
            color: var(--color-comic-yellow);
            /* è­¦å‘Šé»ƒ */
            animation: comic-bounce 1s infinite;
            /* æ›´èª‡å¼µçš„å½ˆè·³ */
            filter: drop-shadow(5px 5px 0 var(--color-comic-black));
        }

        @keyframes comic-bounce {

            0%,
            100% {
                transform: translateY(0) scale(1);
            }

            50% {
                transform: translateY(-15px) scale(1.1);
            }
        }
    </style>
</head>

<body>
    <div id="loading" class="loading-screen">
        <div style="font-size: 4rem;">ğŸ’¥</div>
        <p style="color: white; font-weight: bold; margin-top: 20px;">è‹±é›„æ­£åœ¨é›†çµè³‡è¨Š...</p>
    </div>
    <div class="status-bar">
        <div class="location-pill">ğŸ“ è‡ºæ±åŸºåœ°</div>
        <div id="updateTime" class="update-pill">æ›´æ–°ä¸­...</div>
    </div>

    <div class="container" id="mainContent" style="display: none;">

        <div id="heroCard">
        </div>

        <h3 class="section-title">ä»»å‹™é å ±</h3>
        <div class="scroll-container" id="futureForecasts">
        </div>

    </div>

    <script>
        const API_URL = "https://kuanwen-weather-kaohsiung.zeabur.app/api/weather/kaohsiung";

        function getWeatherIcon(weather) {
            if (!weather) return "ğŸ’¥"; // é è¨­ç‚ºæ¼«ç•«æ„Ÿçˆ†ç‚¸
            if (weather.includes("æ™´")) return "â˜€ï¸";
            if (weather.includes("å¤šé›²")) return "â˜ï¸"; // ç°¡åŒ–ç‚ºé›²
            if (weather.includes("é™°")) return "â˜ï¸";
            if (weather.includes("é›¨")) return "ğŸ’§"; // ç°¡åŒ–æ°´æ»´
            if (weather.includes("é›·")) return "âš¡"; // é–ƒé›»
            return "ğŸ’¥";
        }

        function getAdvice(rainProb, maxTemp) {
            let rainIcon = "ğŸŒ‚";
            let rainText = "é˜²é›¨ç½©ç„¡éœ€æº–å‚™!";
            if (parseInt(rainProb) > 30) {
                rainIcon = "â˜‚ï¸";
                rainText = "ç«‹å³éƒ¨ç½²é˜²é›¨ç½©!";
            }

            let clothIcon = "ğŸ‘•";
            let clothText = "è¼•è£å‡ºå‹•!";
            if (parseInt(maxTemp) >= 28) {
                clothIcon = "ğŸ½";
                clothText = "æ¥µé™é™æº«æœ!";
            } else if (parseInt(maxTemp) <= 20) {
                clothIcon = "ğŸ§¥";
                clothText = "åŠ å›ºè£ç”²!";
            }

            return { rainIcon, rainText, clothIcon, clothText };
        }

        function getTimePeriod(startTime) {
            const hour = new Date(startTime).getHours();
            if (hour >= 5 && hour < 11) return "æ—©æ™¨ä»»å‹™";
            if (hour >= 11 && hour < 14) return "ä¸­åˆæˆ°å ´";
            if (hour >= 14 && hour < 18) return "ä¸‹åˆå·¡é‚";
            if (hour >= 18 && hour < 23) return "å¤œé–“è­¦æˆ’";
            return "æ·±å¤œæ½›ä¼";
        }

        function renderWeather(data) {
            const forecasts = data.forecasts;
            const current = forecasts[0];
            const others = forecasts.slice(1);

            // 1. æ¸²æŸ“ Hero Card (ä¸»ç•«é¢)
            const advice = getAdvice(current.rain, current.maxTemp);
            const period = getTimePeriod(current.startTime);
            const avgTemp = Math.round((parseInt(current.maxTemp) + parseInt(current.minTemp)) / 2);

            // ä¿®æ­£ 2: åˆ¤æ–·æ˜¯å¦ç‚ºå¤œé–“æ™‚æ®µï¼Œè‹¥ç‚ºå¤œé–“ï¼Œå°‡åœ–æ¨™æ›¿æ›ç‚ºå¤œé–“ç¬¦è™Ÿ
            let heroIcon = getWeatherIcon(current.weather);
            if (period === "å¤œé–“è­¦æˆ’" || period === "æ·±å¤œæ½›ä¼") {
                // å¦‚æœåŸæœ¬åœ–æ¨™æ˜¯å¤ªé™½ â˜€ï¸ æˆ–é›² â˜ï¸ï¼Œæ›¿æ›ç‚ºæœˆäº® ğŸŒ™ æˆ– å¤œæ™¯ ğŸŒƒ (å–æ±ºæ–¼æ‚¨å–œæ­¡å“ªä¸€å€‹)
                // é€™è£¡ä½¿ç”¨ ğŸŒ™ï¼Œè‹¥æ‚¨å–œæ­¡æ›´æˆ²åŠ‡åŒ–çš„å¯ä»¥æ›æˆ ğŸŒƒ
                if (heroIcon.includes("â˜€ï¸") || heroIcon.includes("â˜ï¸") || heroIcon.includes("ğŸ’¥")) {
                     heroIcon = "ğŸŒ™";
                }
            }


            document.getElementById('heroCard').innerHTML = `
                        <div class="hero-card">
                            <div class="hero-period">${period}</div>
                            <div class="hero-temp-container">
                                <div class="hero-icon">${heroIcon}</div>
                                <div class="hero-temp">${avgTemp}Â°</div>
                            </div>
                            <div class="hero-desc">${current.weather}</div>
                            
                            <div class="advice-grid">
                                <div class="advice-item">
                                    <div class="advice-icon">${advice.rainIcon}</div>
                                    <div class="advice-text">${advice.rainText}</div>
                                    <div style="font-size:0.7rem; color:#999">é™é›¨ç‡ ${current.rain}</div>
                                </div>
                                <div class="advice-item">
                                    <div class="advice-icon">${advice.clothIcon}</div>
                                    <div class="advice-text">${advice.clothText}</div>
                                    <div style="font-size:0.7rem; color:#999">æœ€é«˜æº« ${current.maxTemp}Â°</div>
                                </div>
                            </div>
                        </div>
                    `;

            // 2. æ¸²æŸ“ç¨å¾Œé å ± (åŒ…å«æ˜å¤©åˆ¤æ–·)
            const scrollContainer = document.getElementById('futureForecasts');
            scrollContainer.innerHTML = '';

            // æŠ“ä»Šå¤©çš„æ—¥æœŸæ•¸å­— (ä¾‹å¦‚ 24)
            const todayDate = new Date().getDate();

            others.forEach(f => {
                let p = getTimePeriod(f.startTime);
                let miniIcon = getWeatherIcon(f.weather);

                // åˆ¤æ–·è©²é å ±çš„æ—¥æœŸæ˜¯å¦è·Ÿä»Šå¤©ä¸åŒï¼Œä¸åŒå°±æ˜¯æ˜å¤©
                const fDate = new Date(f.startTime);
                if (fDate.getDate() !== todayDate) {
                    p = "æ˜æ—¥" + p.replace("ä»»å‹™", "");
                }
                
                // æ¬¡è¦é å ±ä¹Ÿåˆ¤æ–·æ˜¯å¦ç‚ºå¤œé–“æ™‚æ®µï¼Œä¸¦æ›¿æ›åœ–æ¨™
                if (p.includes("å¤œé–“") || p.includes("æ·±å¤œ")) {
                     if (miniIcon.includes("â˜€ï¸") || miniIcon.includes("â˜ï¸") || miniIcon.includes("ğŸ’¥")) {
                         miniIcon = "ğŸŒ™";
                    }
                }


                scrollContainer.innerHTML += `
                                <div class="mini-card">
                                    <div class="mini-time">${p}</div>
                                    <div class="mini-icon">${miniIcon}</div>
                                    <div class="mini-temp">${f.minTemp}Â° - ${f.maxTemp}Â°</div>
                                    <div style="font-size:0.8rem; color:#888; margin-top:5px;">ğŸ’§${f.rain}</div>
                                </div>
                            `;
            });

            // 3. å³ä¸Šè§’é¡¯ç¤ºä»Šæ—¥æ—¥æœŸ
            const now = new Date();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const dayIndex = now.getDay();
            const days = ["é€±æ—¥", "é€±ä¸€", "é€±äºŒ", "é€±ä¸‰", "é€±å››", "é€±äº”", "é€±å…­"];

            document.getElementById('updateTime').textContent = `${month}æœˆ${date}æ—¥ ${days[dayIndex]}`;
        }

        async function fetchWeather() {
            try {
                // 1. å®šç¾©ã€Œæœ€ä½ç­‰å¾…æ™‚é–“ã€ï¼š1500 æ¯«ç§’ (1.5ç§’)
                const delayPromise = new Promise(resolve => setTimeout(resolve, 1500));

                // 2. å®šç¾©ã€ŒæŠ“å–è³‡æ–™ã€çš„å·¥ä½œ
                const fetchPromise = fetch(API_URL).then(res => res.json());

                // 3. Promise.all æœƒç­‰å¾…ã€Œå…©å€‹éƒ½å®Œæˆã€æ‰æœƒå¾€ä¸‹èµ°
                // result é™£åˆ—è£¡ï¼Œç¬¬ä¸€å€‹æ˜¯ delay çš„çµæœ(æ²’ç”¨åˆ°)ï¼Œç¬¬äºŒå€‹æ˜¯ api çš„ json è³‡æ–™
                const [_, json] = await Promise.all([delayPromise, fetchPromise]);

                if (json.success) {
                    renderWeather(json.data);

                    // è³‡æ–™è™•ç†å¥½å¾Œï¼Œéš±è— Loadingï¼Œé¡¯ç¤ºä¸»ç•«é¢
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('mainContent').style.display = 'block';
                } else {
                    throw new Error("API Error");
                }
            } catch (e) {
                console.error(e);
                alert("å¤©æ°£è³‡æ–™è®€å–å¤±æ•—ï¼Œæˆ°é¬¥è£ç”²é€£ç·šä¸­æ–·ï¼");
            }
        }

        document.addEventListener("DOMContentLoaded", fetchWeather);
    </script>
</body>

</html>